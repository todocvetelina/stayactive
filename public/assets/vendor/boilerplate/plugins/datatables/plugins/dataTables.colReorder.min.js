!function(t){"function"==typeof define&&define.amd?define(["jquery","datatables.net"],(function(e){return t(e,window,document)})):"object"==typeof exports?module.exports=function(e,o){return e||(e=window),o&&o.fn.dataTable||(o=require("datatables.net")(e,o).$),t(o,e,e.document)}:t(jQuery,window,document)}((function(t,e,o,n){function s(t){for(var e=[],o=0,n=t.length;o<n;o++)e[t[o]]=o;return e}function r(t,e,o){e=t.splice(e,1)[0],t.splice(o,0,e)}function i(t,e,o){for(var n=[],s=0,r=t.childNodes.length;s<r;s++)1==t.childNodes[s].nodeType&&n.push(t.childNodes[s]);e=n[e],null!==o?t.insertBefore(e,n[o]):t.appendChild(e)}var a=t.fn.dataTable;t.fn.dataTableExt.oApi.fnColReorder=function(e,o,a,l,d){var f,h,u=e.aoColumns.length,c=function(t,e,o){if(t[e]&&"function"!=typeof t[e]){var n=t[e].split("."),s=n.shift();isNaN(1*s)||(t[e]=o[1*s]+"."+n.join("."))}};if(o!=a)if(0>o||o>=u)this.oApi._fnLog(e,1,"ColReorder 'from' index is out of bounds: "+o);else if(0>a||a>=u)this.oApi._fnLog(e,1,"ColReorder 'to' index is out of bounds: "+a);else{var g=[],m=0;for(f=u;m<f;m++)g[m]=m;r(g,o,a);var C=s(g);for(m=0,f=e.aaSorting.length;m<f;m++)e.aaSorting[m][0]=C[e.aaSorting[m][0]];if(null!==e.aaSortingFixed)for(m=0,f=e.aaSortingFixed.length;m<f;m++)e.aaSortingFixed[m][0]=C[e.aaSortingFixed[m][0]];for(m=0,f=u;m<f;m++){var p=e.aoColumns[m];for(g=0,h=p.aDataSort.length;g<h;g++)p.aDataSort[g]=C[p.aDataSort[g]];p.idx=C[p.idx]}for(t.each(e.aLastSort,(function(t,o){e.aLastSort[t].src=C[o.src]})),m=0,f=u;m<f;m++)"number"==typeof(p=e.aoColumns[m]).mData?p.mData=C[p.mData]:t.isPlainObject(p.mData)&&(c(p.mData,"_",C),c(p.mData,"filter",C),c(p.mData,"sort",C),c(p.mData,"type",C));if(e.aoColumns[o].bVisible){for(c=this.oApi._fnColumnIndexToVisible(e,o),h=null,m=a<o?a:a+1;null===h&&m<u;)h=this.oApi._fnColumnIndexToVisible(e,m),m++;for(m=0,f=(g=e.nTHead.getElementsByTagName("tr")).length;m<f;m++)i(g[m],c,h);if(null!==e.nTFoot)for(m=0,f=(g=e.nTFoot.getElementsByTagName("tr")).length;m<f;m++)i(g[m],c,h);for(m=0,f=e.aoData.length;m<f;m++)null!==e.aoData[m].nTr&&i(e.aoData[m].nTr,c,h)}for(r(e.aoColumns,o,a),m=0,f=u;m<f;m++)e.oApi._fnColumnOptions(e,m,{});for(r(e.aoPreSearchCols,o,a),m=0,f=e.aoData.length;m<f;m++){if(p=(h=e.aoData[m]).anCells)for(r(p,o,a),g=0,c=p.length;g<c;g++)p[g]&&p[g]._DT_CellIndex&&(p[g]._DT_CellIndex.column=g);"dom"!==h.src&&Array.isArray(h._aData)&&r(h._aData,o,a)}for(m=0,f=e.aoHeader.length;m<f;m++)r(e.aoHeader[m],o,a);if(null!==e.aoFooter)for(m=0,f=e.aoFooter.length;m<f;m++)r(e.aoFooter[m],o,a);for((d||d===n)&&t.fn.dataTable.Api(e).rows().invalidate(),m=0,f=u;m<f;m++)t(e.aoColumns[m].nTh).off(".DT"),this.oApi._fnSortAttachListener(e,e.aoColumns[m].nTh,m);t(e.oInstance).trigger("column-reorder.dt",[e,{from:o,to:a,mapping:C,drop:l,iFrom:o,iTo:a,aiInvertMapping:C}])}};var l=function(e,o){if((e=new t.fn.dataTable.Api(e).settings()[0])._colReorder)return e._colReorder;!0===o&&(o={});var n=t.fn.dataTable.camelToHungarian;return n&&(n(l.defaults,l.defaults,!0),n(l.defaults,o||{})),this.s={dt:null,enable:null,init:t.extend(!0,{},l.defaults,o),fixed:0,fixedRight:0,reorderCallback:null,mouse:{startX:-1,startY:-1,offsetX:-1,offsetY:-1,target:-1,targetIndex:-1,fromIndex:-1},aoTargets:[]},this.dom={drag:null,pointer:null},this.s.enable=this.s.init.bEnable,this.s.dt=e,this.s.dt._colReorder=this,this._fnConstruct(),this};return t.extend(l.prototype,{fnEnable:function(t){if(!1===t)return fnDisable();this.s.enable=!0},fnDisable:function(){this.s.enable=!1},fnReset:function(){return this._fnOrderColumns(this.fnOrder()),this},fnGetCurrentOrder:function(){return this.fnOrder()},fnOrder:function(e,o){var r,i=[],a=this.s.dt.aoColumns;if(e===n){for(o=0,r=a.length;o<r;o++)i.push(a[o]._ColReorder_iOrigCol);return i}if(o){for(a=this.fnOrder(),o=0,r=e.length;o<r;o++)i.push(t.inArray(e[o],a));e=i}return this._fnOrderColumns(s(e)),this},fnTranspose:function(e,o){o||(o="toCurrent");var n=this.fnOrder(),s=this.s.dt.aoColumns;return"toCurrent"===o?Array.isArray(e)?t.map(e,(function(e){return t.inArray(e,n)})):t.inArray(e,n):Array.isArray(e)?t.map(e,(function(t){return s[t]._ColReorder_iOrigCol})):s[e]._ColReorder_iOrigCol},_fnConstruct:function(){var e,o=this,n=this.s.dt.aoColumns.length,r=this.s.dt.nTable;for(this.s.init.iFixedColumns&&(this.s.fixed=this.s.init.iFixedColumns),this.s.init.iFixedColumnsLeft&&(this.s.fixed=this.s.init.iFixedColumnsLeft),this.s.fixedRight=this.s.init.iFixedColumnsRight?this.s.init.iFixedColumnsRight:0,this.s.init.fnReorderCallback&&(this.s.reorderCallback=this.s.init.fnReorderCallback),e=0;e<n;e++)e>this.s.fixed-1&&e<n-this.s.fixedRight&&this._fnMouseListener(e,this.s.dt.aoColumns[e].nTh),this.s.dt.aoColumns[e]._ColReorder_iOrigCol=e;this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateSaveParams",(function(t,e){o._fnStateSave.call(o,e)}),"ColReorder_State"),this.s.dt.oApi._fnCallbackReg(this.s.dt,"aoStateLoadParams",(function(t,e){o.s.dt._colReorder.fnOrder(e.ColReorder,!0)}));var i=null;if(this.s.init.aiOrder&&(i=this.s.init.aiOrder.slice()),this.s.dt.oLoadedState&&void 0!==this.s.dt.oLoadedState.ColReorder&&this.s.dt.oLoadedState.ColReorder.length==this.s.dt.aoColumns.length&&(i=this.s.dt.oLoadedState.ColReorder),i)if(o.s.dt._bInitComplete)n=s(i),o._fnOrderColumns.call(o,n);else{var a=!1;t(r).on("draw.dt.colReorder",(function(){if(!o.s.dt._bInitComplete&&!a){a=!0;var t=s(i);o._fnOrderColumns.call(o,t)}}))}else this._fnSetColumnIndexes();t(r).on("destroy.dt.colReorder",(function(){t(r).off("destroy.dt.colReorder draw.dt.colReorder"),t.each(o.s.dt.aoColumns,(function(e,o){t(o.nTh).off(".ColReorder"),t(o.nTh).removeAttr("data-column-index")})),o.s.dt._colReorder=null,o.s=null}))},_fnOrderColumns:function(e){var o=!1;if(e.length!=this.s.dt.aoColumns.length)this.s.dt.oInstance.oApi._fnLog(this.s.dt,1,"ColReorder - array reorder does not match known number of columns. Skipping.");else{for(var n=0,s=e.length;n<s;n++){var i=t.inArray(n,e);n!=i&&(r(e,i,n),this.s.dt.oInstance.fnColReorder(i,n,!0,!1),o=!0)}this._fnSetColumnIndexes(),o&&(t.fn.dataTable.Api(this.s.dt).rows().invalidate(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))}},_fnStateSave:function(e){if(null!==this.s){var o,n,s=this.s.dt.aoColumns;if(e.ColReorder=[],e.aaSorting){for(o=0;o<e.aaSorting.length;o++)e.aaSorting[o][0]=s[e.aaSorting[o][0]]._ColReorder_iOrigCol;var r=t.extend(!0,[],e.aoSearchCols);for(o=0,n=s.length;o<n;o++){var i=s[o]._ColReorder_iOrigCol;e.aoSearchCols[i]=r[o],e.abVisCols[i]=s[o].bVisible,e.ColReorder.push(i)}}else if(e.order){for(o=0;o<e.order.length;o++)e.order[o][0]=s[e.order[o][0]]._ColReorder_iOrigCol;for(r=t.extend(!0,[],e.columns),o=0,n=s.length;o<n;o++)i=s[o]._ColReorder_iOrigCol,e.columns[i]=r[o],e.ColReorder.push(i)}}},_fnMouseListener:function(e,o){var n=this;t(o).on("mousedown.ColReorder",(function(t){n.s.enable&&1===t.which&&n._fnMouseDown.call(n,t,o)})).on("touchstart.ColReorder",(function(t){n.s.enable&&n._fnMouseDown.call(n,t,o)}))},_fnMouseDown:function(e,s){var r=this,i=t(e.target).closest("th, td").offset();(s=parseInt(t(s).attr("data-column-index"),10))!==n&&(this.s.mouse.startX=this._fnCursorPosition(e,"pageX"),this.s.mouse.startY=this._fnCursorPosition(e,"pageY"),this.s.mouse.offsetX=this._fnCursorPosition(e,"pageX")-i.left,this.s.mouse.offsetY=this._fnCursorPosition(e,"pageY")-i.top,this.s.mouse.target=this.s.dt.aoColumns[s].nTh,this.s.mouse.targetIndex=s,this.s.mouse.fromIndex=s,this._fnRegions(),t(o).on("mousemove.ColReorder touchmove.ColReorder",(function(t){r._fnMouseMove.call(r,t)})).on("mouseup.ColReorder touchend.ColReorder",(function(t){r._fnMouseUp.call(r,t)})))},_fnMouseMove:function(t){var e=this;if(null===this.dom.drag){if(5>Math.pow(Math.pow(this._fnCursorPosition(t,"pageX")-this.s.mouse.startX,2)+Math.pow(this._fnCursorPosition(t,"pageY")-this.s.mouse.startY,2),.5))return;this._fnCreateDragNode()}this.dom.drag.css({left:this._fnCursorPosition(t,"pageX")-this.s.mouse.offsetX,top:this._fnCursorPosition(t,"pageY")-this.s.mouse.offsetY});var o=this.s.mouse.toIndex;t=this._fnCursorPosition(t,"pageX");for(var n=function(t){for(;0<=t;){if(0>=--t)return null;if(e.s.aoTargets[t+1].x!==e.s.aoTargets[t].x)return e.s.aoTargets[t]}},s=function(){for(var t=0;t<e.s.aoTargets.length-1;t++)if(e.s.aoTargets[t].x!==e.s.aoTargets[t+1].x)return e.s.aoTargets[t]},r=function(){for(var t=e.s.aoTargets.length-1;0<t;t--)if(e.s.aoTargets[t].x!==e.s.aoTargets[t-1].x)return e.s.aoTargets[t]},i=1;i<this.s.aoTargets.length;i++){var a=n(i);a||(a=s());var l=a.x+(this.s.aoTargets[i].x-a.x)/2;if(this._fnIsLtr()){if(t<l){var d=a;break}}else if(t>l){d=a;break}}d?(this.dom.pointer.css("left",d.x),this.s.mouse.toIndex=d.to):(this.dom.pointer.css("left",r().x),this.s.mouse.toIndex=r().to),this.s.init.bRealtime&&o!==this.s.mouse.toIndex&&(this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex),this.s.mouse.fromIndex=this.s.mouse.toIndex,""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this._fnRegions())},_fnMouseUp:function(e){t(o).off(".ColReorder"),null!==this.dom.drag&&(this.dom.drag.remove(),this.dom.pointer.remove(),this.dom.drag=null,this.dom.pointer=null,this.s.dt.oInstance.fnColReorder(this.s.mouse.fromIndex,this.s.mouse.toIndex,!0),this._fnSetColumnIndexes(),""===this.s.dt.oScroll.sX&&""===this.s.dt.oScroll.sY||this.s.dt.oInstance.fnAdjustColumnSizing(!1),this.s.dt.oInstance.oApi._fnSaveState(this.s.dt),null!==this.s.reorderCallback&&this.s.reorderCallback.call(this))},_fnRegions:function(){var e=this.s.dt.aoColumns,o=this._fnIsLtr();this.s.aoTargets.splice(0,this.s.aoTargets.length);var n=t(this.s.dt.nTable).offset().left,s=[];t.each(e,(function(e,r){if(r.bVisible&&"none"!==r.nTh.style.display){var i=(r=t(r.nTh)).offset().left;o&&(i+=r.outerWidth()),s.push({index:e,bound:i}),n=i}else s.push({index:e,bound:n})}));var r=s[0];for(e=t(e[r.index].nTh).outerWidth(),this.s.aoTargets.push({to:0,x:r.bound-e}),r=0;r<s.length;r++){var i=(e=s[r]).index;e.index<this.s.mouse.fromIndex&&i++,this.s.aoTargets.push({to:i,x:e.bound})}0!==this.s.fixedRight&&this.s.aoTargets.splice(this.s.aoTargets.length-this.s.fixedRight),0!==this.s.fixed&&this.s.aoTargets.splice(0,this.s.fixed)},_fnCreateDragNode:function(){var e=""!==this.s.dt.oScroll.sX||""!==this.s.dt.oScroll.sY,o=this.s.dt.aoColumns[this.s.mouse.targetIndex].nTh,n=o.parentNode,s=n.parentNode,r=s.parentNode,i=t(o).clone();this.dom.drag=t(r.cloneNode(!1)).addClass("DTCR_clonedTable").append(t(s.cloneNode(!1)).append(t(n.cloneNode(!1)).append(i[0]))).css({position:"absolute",top:0,left:0,width:t(o).outerWidth(),height:t(o).outerHeight()}).appendTo("body"),this.dom.pointer=t("<div></div>").addClass("DTCR_pointer").css({position:"absolute",top:e?t(t(this.s.dt.nScrollBody).parent()).offset().top:t(this.s.dt.nTable).offset().top,height:e?t(t(this.s.dt.nScrollBody).parent()).height():t(this.s.dt.nTable).height()}).appendTo("body")},_fnSetColumnIndexes:function(){t.each(this.s.dt.aoColumns,(function(e,o){t(o.nTh).attr("data-column-index",e)}))},_fnCursorPosition:function(t,e){return-1!==t.type.indexOf("touch")?t.originalEvent.touches[0][e]:t[e]},_fnIsLtr:function(){return"rtl"!==t(this.s.dt.nTable).css("direction")}}),l.defaults={aiOrder:null,bEnable:!0,bRealtime:!0,iFixedColumnsLeft:0,iFixedColumnsRight:0,fnReorderCallback:null},l.version="1.5.5",t.fn.dataTable.ColReorder=l,t.fn.DataTable.ColReorder=l,"function"==typeof t.fn.dataTable&&"function"==typeof t.fn.dataTableExt.fnVersionCheck&&t.fn.dataTableExt.fnVersionCheck("1.10.8")?t.fn.dataTableExt.aoFeatures.push({fnInit:function(t){var e=t.oInstance;return t._colReorder?e.oApi._fnLog(t,1,"ColReorder attempted to initialise twice. Ignoring second"):(e=t.oInit,new l(t,e.colReorder||e.oColReorder||{})),null},cFeature:"R",sFeature:"ColReorder"}):alert("Warning: ColReorder requires DataTables 1.10.8 or greater - www.datatables.net/download"),t(o).on("preInit.dt.colReorder",(function(e,o){if("dt"===e.namespace){e=o.oInit.colReorder;var n=a.defaults.colReorder;(e||n)&&(n=t.extend({},e,n),!1!==e&&new l(o,n))}})),t.fn.dataTable.Api.register("colReorder.reset()",(function(){return this.iterator("table",(function(t){t._colReorder.fnReset()}))})),t.fn.dataTable.Api.register("colReorder.order()",(function(t,e){return t?this.iterator("table",(function(o){o._colReorder.fnOrder(t,e)})):this.context.length?this.context[0]._colReorder.fnOrder():null})),t.fn.dataTable.Api.register("colReorder.transpose()",(function(t,e){return this.context.length&&this.context[0]._colReorder?this.context[0]._colReorder.fnTranspose(t,e):t})),t.fn.dataTable.Api.register("colReorder.move()",(function(t,e,o,n){return this.context.length&&(this.context[0]._colReorder.s.dt.oInstance.fnColReorder(t,e,o,n),this.context[0]._colReorder._fnSetColumnIndexes()),this})),t.fn.dataTable.Api.register("colReorder.enable()",(function(t){return this.iterator("table",(function(e){e._colReorder&&e._colReorder.fnEnable(t)}))})),t.fn.dataTable.Api.register("colReorder.disable()",(function(){return this.iterator("table",(function(t){t._colReorder&&t._colReorder.fnDisable()}))})),l}));
